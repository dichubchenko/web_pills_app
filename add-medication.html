<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –¥–Ω–µ–≤–Ω–∏–∫ | –î–æ–±–∞–≤–∏—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–æ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body>
    <main class="app-container app-add-medication-container">
        <div class="app-glass-card">
            <header class="app-login-header">
                <div class="app-logo">üíä</div>
                <h1 class="app-page-title">–î–æ–±–∞–≤–∏—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–æ</h1>
            </header>

            <form id="medicationForm" class="app-login-form">
                <div class="app-form-group">
                    <label for="med-name" class="app-form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞</label>
                    <input type="text" id="med-name" class="app-form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê—Å–ø–∏—Ä–∏–Ω">
                </div>

                <div class="app-form-group">
                    <label for="med-dosage" class="app-form-label">–î–æ–∑–∏—Ä–æ–≤–∫–∞</label>
                    <input type="text" id="med-dosage" class="app-form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1 —Ç–∞–±–ª–µ—Ç–∫–∞, 10–º–≥">
                </div>

                <div class="app-form-group">
                    <label for="med-time" class="app-form-label">–í—Ä–µ–º—è –ø—Ä–∏—ë–º–∞</label>
                    <input type="time" id="med-time" class="app-form-input" value="12:00">
                </div>

                <div class="app-form-group">
                    <label class="app-form-label">–¢–∏–ø –ø—Ä–∏—ë–º–∞</label>
                    <div class="app-form-options" id="medicationTypeOptions">
                        <div class="app-form-option">
                            <input type="radio" id="type-single" name="med-type" value="single" class="app-form-radio" checked>
                            <label for="type-single" class="app-form-radio-label">–†–∞–∑–æ–≤—ã–π</label>
                        </div>
                        <div class="app-form-option">
                            <input type="radio" id="type-regular" name="med-type" value="regular" class="app-form-radio">
                            <label for="type-regular" class="app-form-radio-label">–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π</label>
                        </div>
                    </div>
                </div>

                <div class="app-form-group" id="frequencyGroup" style="display: none;">
                    <label class="app-form-label">–ü–æ–≤—Ç–æ—Ä—è—Ç—å</label>
                    <div class="app-frequency-options">
                        <div class="app-form-option">
                            <input type="radio" id="freq-daily" name="med-frequency" value="daily" class="app-form-radio">
                            <label for="freq-daily" class="app-form-radio-label">–ö–∞–∂–¥—ã–π –¥–µ–Ω—å</label>
                        </div>
                        <div class="app-form-option">
                            <input type="radio" id="freq-weekly" name="med-frequency" value="weekly" class="app-form-radio">
                            <label for="freq-weekly" class="app-form-radio-label">–ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é</label>
                        </div>
                        <div class="app-form-option">
                            <input type="radio" id="freq-monthly" name="med-frequency" value="monthly" class="app-form-radio">
                            <label for="freq-monthly" class="app-form-radio-label">–ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü</label>
                        </div>
                    </div>
                </div>

                <div class="app-form-group">
                    <label for="med-notes" class="app-form-label">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <textarea id="med-notes" class="app-form-input" rows="3" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ—Å–ª–µ –µ–¥—ã, –∑–∞–ø–∏–≤–∞—Ç—å –≤–æ–¥–æ–π..."></textarea>
                </div>

                <div id="formError" class="app-error-message" style="display: none; color: #ff6b6b; margin-bottom: var(--spacing-md);"></div>

                <div class="app-form-actions">
                    <a href="diary.html" class="app-button" style="background: transparent; border: 1px solid rgba(255, 255, 255, 0.1);">–û—Ç–º–µ–Ω–∞</a>
                    <button type="button" id="submitBtn" class="app-button app-button--accent">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
            </form>

            <footer class="app-login-footer">
                <p><a href="diary.html">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –¥–Ω–µ–≤–Ω–∏–∫</a></p>
            </footer>
        </div>
    </main>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–µ–∫–∞—Ä—Å—Ç–≤–∞
        console.log('Add medication page loaded - SIMPLE VERSION');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) {
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 100);
        }
        
        // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø—Ä–∏–µ–º–∞
        document.querySelectorAll('input[name="med-type"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const frequencyGroup = document.getElementById('frequencyGroup');
                if (this.value === 'regular') {
                    frequencyGroup.style.display = 'block';
                } else {
                    frequencyGroup.style.display = 'none';
                }
            });
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('submitBtn').addEventListener('click', function() {
            const name = document.getElementById('med-name').value;
            const dosage = document.getElementById('med-dosage').value;
            const time = document.getElementById('med-time').value;
            const errorElement = document.getElementById('formError');
            
            if (!name || !dosage || !time) {
                errorElement.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è';
                errorElement.style.display = 'block';
                return;
            }
            
            // –ò–º–∏—Ç–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
            errorElement.style.display = 'none';
            this.textContent = '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ...';
            this.disabled = true;
            
            setTimeout(() => {
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –æ–±—Ä–∞—Ç–Ω–æ –≤ –¥–Ω–µ–≤–Ω–∏–∫
                window.location.href = 'diary.html';
            }, 1000);
        });
    </script>
</body>
</html>
