<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –¥–Ω–µ–≤–Ω–∏–∫ | –ú–æ–π –¥–µ–Ω—å</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        /* –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        .app-medication-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border-left: 4px solid #1a6b8a;
        }
        
        .app-medication-checkbox {
            margin-right: 1rem;
            width: 20px;
            height: 20px;
        }
        
        .app-medication-info {
            flex: 1;
        }
        
        .app-medication-name {
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .app-medication-time {
            font-size: 0.85rem;
            color: #b3e0f2;
        }
    </style>
</head>
<body>
    <main class="app-container">
        <header class="app-diary-header">
            <h1 class="app-page-title">–ú–æ–π –¥–Ω–µ–≤–Ω–∏–∫</h1>
            <div class="app-date-current" id="currentDate">–°—Ä–µ–¥–∞, 17 –ê–ø—Ä–µ–ª—è</div>
        </header>

        <!-- –°–µ–∫—Ü–∏—è "–ö –ø—Ä–∏—ë–º—É" -->
        <section class="app-medication-section">
            <h2 class="app-section-title">–ö –ø—Ä–∏—ë–º—É (<span id="pendingCount">2</span>)</h2>
            <div class="app-medication-list" id="pendingMedications">
                <div class="app-medication-item">
                    <input type="checkbox" class="app-medication-checkbox">
                    <div class="app-medication-info">
                        <div class="app-medication-name">üíä –ê—Å–ø–∏—Ä–∏–Ω</div>
                        <div class="app-medication-time">09:00 | 1 —Ç–∞–±–ª–µ—Ç–∫–∞ –ø–æ—Å–ª–µ –µ–¥—ã</div>
                    </div>
                </div>
                <div class="app-medication-item">
                    <input type="checkbox" class="app-medication-checkbox">
                    <div class="app-medication-info">
                        <div class="app-medication-name">üíä –í–∏—Ç–∞–º–∏–Ω D</div>
                        <div class="app-medication-time">12:00 | 1 –∫–∞–ø—Å—É–ª–∞</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è "–ü—Ä–∏–Ω—è—Ç–æ" -->
        <section class="app-medication-section">
            <h2 class="app-section-title">–ü—Ä–∏–Ω—è—Ç–æ (<span id="takenCount">1</span>)</h2>
            <div class="app-medication-list" id="takenMedications">
                <div class="app-medication-item" style="opacity: 0.7; border-left-color: #34c7a6;">
                    <input type="checkbox" class="app-medication-checkbox" checked>
                    <div class="app-medication-info">
                        <div class="app-medication-name" style="text-decoration: line-through;">üíä –û–º–µ–≥–∞-3</div>
                        <div class="app-medication-time" style="text-decoration: line-through;">08:00 | 1 –∫–∞–ø—Å—É–ª–∞</div>
                    </div>
                </div>
            </div>
        </section>

        <div style="text-align: center; margin-top: 2rem;">
            <a href="add-medication.html" class="app-button app-button--accent">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–æ</a>
            <div style="margin-top: 1rem;">
                <a href="index.html" class="app-button" style="background: transparent; border: 1px solid rgba(255, 255, 255, 0.1);">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            </div>
        </div>
    </main>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è –¥–Ω–µ–≤–Ω–∏–∫–∞
        console.log('Diary page loaded - SIMPLE VERSION');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) {
            // –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –ª–æ–≥–∏–Ω
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 100);
        } else {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            try {
                const user = JSON.parse(currentUser);
                const pageTitle = document.querySelector('.app-page-title');
                if (pageTitle) {
                    pageTitle.textContent = `–î–Ω–µ–≤–Ω–∏–∫ ${user.name}`;
                }
            } catch (e) {
                console.log('Error parsing user:', e);
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ–∫–±–æ–∫—Å–æ–≤
        document.querySelectorAll('.app-medication-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const item = this.closest('.app-medication-item');
                if (this.checked) {
                    item.style.opacity = '0.7';
                    item.style.borderLeftColor = '#34c7a6';
                    item.querySelector('.app-medication-name').style.textDecoration = 'line-through';
                    item.querySelector('.app-medication-time').style.textDecoration = 'line-through';
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
                    const pendingCount = document.getElementById('pendingCount');
                    const takenCount = document.getElementById('takenCount');
                    if (pendingCount && takenCount) {
                        pendingCount.textContent = parseInt(pendingCount.textContent) - 1;
                        takenCount.textContent = parseInt(takenCount.textContent) + 1;
                    }
                }
            });
        });
        
        // –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
        document.body.addEventListener('click', function(e) {
            if (e.target.id === 'logoutBtn') {
                e.preventDefault();
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }
        });
    </script>
</body>
</html>